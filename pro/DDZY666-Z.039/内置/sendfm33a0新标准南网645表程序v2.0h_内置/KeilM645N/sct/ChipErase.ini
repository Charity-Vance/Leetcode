
FUNC void ChipEraseSetup (void) {

 
  _WDWORD(0x4000022C, 0x00060020);//配置NVMIF时钟
  _sleep_(1);
  _WDWORD(0x40001014, 0x80000200); //编程器通过SWD配置ERTYPE寄存器为10
  _sleep_(1);
  
  _WDWORD(0x40001014, 0x80000201);//设置擦除请求
  
  _sleep_(1);
  
  _WDWORD(0x40001018, 0x96969696);//写入擦除密码0x96969696
  _sleep_(1);
  _WDWORD(0x40001018, 0x7D7D7D7D);//写入擦除密码0x96969696
  _sleep_(1);
  _WDWORD(0x00000000, 0x1234ABCD);//擦除启动
  
  _sleep_(1500);
  _WDWORD(0x40001018, 0x00000000);//清除擦除密码
  printf ("NVMIF EPCON = %04XH,bit0==0表示擦除成功\n", _RDWORD(0x40001014));
  
}


ChipEraseSetup();                       // Debugger Setup

